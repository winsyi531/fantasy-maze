body {
    background-color: #2c2c2c;
    color: #ffffff;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    font-family: "monospace";
    overflow: hidden; /* 防止震動時出現滾動條 */
}

#status-board {
    font-size: 18px;
    margin-bottom: 15px;
    background: #444;
    padding: 10px 20px;
    border-radius: 5px;
    border: 1px solid #666;
    z-index: 10;
}

#maze {
    display: grid;
    grid-template-columns: repeat(15, 30px); 
    grid-auto-rows: 30px; 
    gap: 0;
    background: #1a1a1a;
    padding: 10px;
    border: 2px solid #555;
    position: relative;
}

/* --- 特效 1: 畫面震動 --- */
@keyframes shake {
    0% { transform: translate(1px, 1px); }
    20% { transform: translate(-2px, -1px); }
    40% { transform: translate(2px, 1px); }
    60% { transform: translate(-1px, 2px); }
    100% { transform: translate(0, 0); }
}
.shake-effect {
    animation: shake 0.15s ease-in-out;
}

/* --- 特效 2: 角色光暈 --- */
@keyframes character-glow {
    0% { text-shadow: 0 0 5px #fff, 0 0 10px #ffeb3b; opacity: 1; }
    50% { text-shadow: 0 0 15px #fff, 0 0 25px #ffeb3b; opacity: 0.8; }
    100% { text-shadow: 0 0 5px #fff, 0 0 10px #ffeb3b; opacity: 1; }
}
.player-active {
    color: #ffeb3b;
    font-weight: bold;
    animation: character-glow 1.5s infinite;
}

/* --- 修改後的特效 3: 戰爭迷霧 --- */
.cell {
    width: 30px;
    height: 30px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 20px;
    line-height: 1;
    background-color: #000; /* 預設底色 */
    color: #ffffff; /* 預設文字顏色，由 opacity 控制可見度 */
    transition: opacity 0.4s ease; /* 讓光影過渡平滑 */
    opacity: 0; /* 預設完全不可見 */
}

/* 角色視線範圍內的格子 */
/* .cell.visible { */
    /* background-color: #1a1a1a; /* 恢復背景色 */ 
    /* color: #ffffff; /* 顯示文字 (牆、寶、門) */
/* } */

.gem {
    color: #00e5ff;
    font-weight: bold;
    text-shadow: 0 0 5px #00e5ff;
}

#instruction-area {
    margin-top: 15px;
    text-align: center;
}
.message-line1 { font-size: 18px; margin-bottom: 5px; }
.message-line2 { color: #aaa; font-size: 14px; }

/* --- 新增：虛擬按鍵樣式 --- */
#controls {
    margin-top: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
}

.control-row {
    display: flex;
    gap: 10px;
}

.ctrl-btn {
    width: 60px;
    height: 50px;
    background-color: #444;
    color: white;
    border: 2px solid #666;
    border-radius: 8px;
    font-size: 18px;
    cursor: pointer;
    user-select: none; /* 防止快速點擊選中文字 */
    transition: all 0.1s;
}

/* 點擊時的視覺回饋 */
.ctrl-btn:active {
    background-color: #666;
    transform: translateY(2px);
    box-shadow: 0 0 10px #ffeb3b; /* 點擊時發出微弱黃光 */
}

/* 點擊時恢復初始 */
.reset-btn {
    background-color: #5a2a2a; /* 暗紅色，代表危險或重置 */
    border-color: #834444;
}

.reset-btn:active {
    background-color: #834444;
    box-shadow: 0 0 10px #ff4444; /* 點擊時發出紅光 */
}
